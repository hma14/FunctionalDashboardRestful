<div class="container-fluid" ng-app="functionalDashboardApp" ng-controller="filesController">


    <div class="col-lg-12">
        <div class="col-lg-7">

            <h5 class="title panel-title">Detailed - File</h5>
            <table class="table table-striped table-responsive">
                <caption class="caption">NCS Detail</caption>

                <tr>
                    <td class="itemName text-info col-lg-4">NCS Organisation Name</td>
                    <td>{{NCSName}}</td>
                </tr>
                <tr>
                    <td class="itemName text-info">NCS Customer ID</td>
                    <td>{{OrganizationId}}</td>
                </tr>
                <tr>
                    <td class="itemName text-info">NCS Organisation ID</td>
                    <td>{{NCSCustomerAssignedID}}</td>
                </tr>
                <tr>
                    <td class="itemName text-info">File Name</td>
                    <td>{{FileName}}</td>
                </tr>
                <tr>
                    <td class="itemName text-info">Directory</td>
                    <td>{{Directory}}</td>
                </tr>
                <tr>
                    <td class="itemName text-info">Datetime Received</td>
                    <td>{{DateStart}}</td>
                </tr>
                <tr>
                    <td ng-show="TotalErrors > 0" class="alert alert-danger">Status</td>
                    <td ng-show="TotalErrors == 0" class="itemName text-info">Status</td>
                    <td ng-show="TotalErrors > 0" class="errors">{{TotalErrors}}</td>
                    <td ng-show="TotalErrors == 0" class="infos">0</td>
                </tr>
            </table>
        </div>

        <div class="row col-sm-5 searches">
            <label for="search">Search: </label>
            <input id="search" ng-model="search" type="text" class="form-control form-group" />
        </div>
    </div>

    <div class="col-lg-12">
        <table class="table table-striped table-responsive">
            <caption class="caption">File Detail</caption>
            <thead>
                <tr>
                    <th>
                        <a href="" ng-click="sortField4='DateStart';reverse4=!reverse4">Datetime Started</a>
                    </th>
                    <th>
                        <a href="" ng-click="sortField4='Event';reverse4=!reverse4">Event (ID)</a>
                    </th>
                    <th>
                        <a href="" ng-click="sortField4='RequestTxID';reverse4=!reverse4">Request Transaction ID</a>
                    </th>
                    <th>
                        <a href="" ng-click="sortField4='UniqueParticipantId';reverse4=!reverse4">UniqueParticipant ID</a>
                    </th>
                    <th>
                        <a href="" ng-click="sortField4='Action';reverse4=!reverse4">Action</a>
                    </th>
                    <th>
                        <a href="" ng-click="sortField4='ReasonCode';reverse4=!reverse4">Reason</a>
                    </th>
                    <th>
                        <a href="" ng-click="sortField4='CardSerialNumber';reverse4=!reverse4">Card Serial Number</a>
                    </th>
                    <th>
                        Xml Data
                    </th>
                    <th>
                        <a href="" ng-click="sortField4='Errors';reverse4=!reverse4">Request Status</a>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="ev in fileDetail | filter:search | orderBy:sortField4:reverse4">
                    <td>{{ev.DateStart | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                    <td>{{ev.Event}} (<span class="ids">{{ev.EventID}}</span>)</td>
                    <td>{{ev.RequestTxID}}</td>
                    <td>{{ev.UniqueParticipantId}}</td>
                    <td>{{ev.Action}}</td>
                    <td>{{ev.ReasonCode}}</td>
                    <td>{{ev.CardSerialNumber}}</td>
                    <td><a href="#/xmldata" ng-click="getXmlData(ev.ID)">View</a></td>
                    <td ng-show="ev.Errors > 0" class ="errors">ERROR ({{ev.Errors}})</td>
                    <td ng-show="ev.Errors == 0" class="infos">Completed</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
